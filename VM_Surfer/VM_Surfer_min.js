//Just please give credit if you use this @ObviousAlexC or @ThatOneWierdo92
//Paste after declaring your extensions function or if a plugin after declaring the VM
//Refreshing the JSON will make sure that all the json objects are up to date.
const vmSurfer={globalVariables:{},globalLists:{},stage:{},sprites:{},clones:{},refreshJSON(){let e=Scratch.vm.runtime.targets;this.sprites={},this.clones={};for(let s=0;s<e.length;s++){let i=e[s],t=i.sprite;if(i.isOriginal&&!i.isStage){this.sprites[i.id]={id:i.id,name:t.name,originalOBJ:i,lists:{},variables:{}},this.clones[t.name]||(this.clones[t.name]={count:0,objects:[]});let l=i.variables,a=Object.keys(l);for(let n=0;n<a.length;n++){let r=l[a[n]];"list"==r.type?this.sprites[i.id].lists[r.id]=r:this.sprites[i.id].variables[r.id]=r}}else if(i.isStage){this.stage={id:i.id,name:t.name,originalOBJ:i};let o=i.variables,h=Object.keys(o);for(let g=0;g<h.length;g++){let b=o[h[g]];"list"==b.type?this.globalLists[b.id]=b:this.globalVariables[b.id]=b}}else if(i.isOriginal)console.warn("An object of an unknown type is inside of the target's JSON Object");else{let c={id:i.id,name:t.name,originalOBJ:i,lists:{},variables:{}};this.clones[c.name]||(this.clones[c.name]={count:0,objects:[]}),this.clones[c.name].count+=1;let d=i.variables,m=Object.keys(d);for(let f=0;f<m.length;f++){let p=d[m[f]];"list"==p.type?c.lists[p.id]=p:c.variables[p.id]=p}this.clones[c.name].objects.push(c)}}}};
